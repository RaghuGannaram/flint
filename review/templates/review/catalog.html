{% extends 'layout.html' %}

{% load custom_filters %}

{% block title %}
  Review Catalog - Flint
{% endblock %}

{% block content %}
  <section class="w-full bg-gray-100 px-6 md:px-10 lg:px-20 py-12">
    <h1 class="text-4xl font-light text-gray-700 text-center mb-16">Explore the Reviews</h1>

    {% if reviews %}
      <!-- Review Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-16">
        {% for review in reviews %}
          <a href="{% url 'review:information' slug=review.slug %}" class="group block">
            <div class="h-full flex flex-col bg-gray-300 rounded-lg overflow-hidden drop-shadow-[0_0_4px_rgba(0,0,0,0.3)] hover:drop-shadow-[0_0_4px_rgba(0,0,0,0.4)] transition">
              <!-- Review Image -->
              <div class="relative h-48 w-full bg-gray-800 flex items-center justify-center">
                {% if review.image %}
                  <img src="{{ review.image.url }}" alt="{{ review.product_name }}" class="w-full h-full object-cover fade-mask" />
                {% else %}
                  <span class="text-gray-400 text-sm">No Image Available</span>
                {% endif %}
              </div>

              <!-- Review Details -->
              <div class="p-4 flex-1 flex flex-col relative">
                <h2 class="text-lg font-semibold text-gray-900 group-hover:text-[#d567a5] transition">{{ review.product_name }}</h2>
                <p class="text-sm text-gray-500">{{ review.created_at|compact_timesince }} ago</p>
                <p class="text-gray-700 mt-2 text-sm line-clamp-3 flex-grow">{{ review.content }}</p>
              </div>

              <!-- View Details Button -->
              <div class="p-4 border-t bg-gray-300 flex justify-center items-center">
                <span class="text-[#d567a5] font-medium text-sm group-hover:underline">View Details â†’</span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-center text-gray-500">No reviews available at the moment.</p>
    {% endif %}
  </section>

  <style>
    .fade-mask {
      mask-image: radial-gradient(circle, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.3) 100%);
      -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.3) 100%);
    }
  </style>
{% endblock %}
